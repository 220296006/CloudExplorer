# Cloud Explorer API Documentation

This document provides a high-level overview of the API endpoints for the Cloud Explorer application.

## Base URL

The base URL for the API is `http://localhost:5000` (in development).

## Authentication

Authentication is handled by Firebase Authentication.  API endpoints (other than user authentication) assume a valid Firebase user context.

## API Endpoints

### Google Docs Integration

* **`POST /create-doc`**

  * Description: Creates a new Google Doc and saves its URL to Firestore.
  * Request Body:
    * `moduleId` (string, optional):  The ID of the module to associate the document with.
    * `examId` (string, optional): The ID of the exam to associate the document with.
    * `title` (string, required): The title of the new Google Doc.
    * `content` (string, optional): The initial content of the Google Doc. Defaults to "No content provided".
  * Response:
    * 200 OK:
      * `documentId` (string): The ID of the created Google Doc.
      * `docUrl` (string):  The URL of the created Google Doc.
    * 400 Bad Request: If neither `moduleId` nor `examId` is provided.
    * 500 Internal Server Error: If there is an error creating the document or saving to Firestore.
* **`GET /get-doc-content/:docId`**

  * Description: Retrieves the content of a Google Doc.
  * Parameters:
    * `docId` (string, required): The ID of the Google Doc to retrieve.
  * Response:
    * 200 OK:
      * Returns the document content. The structure of the content is complex and corresponds to the Google Docs API's representation of document content.
    * 400 Bad Request: If the `docId` is invalid.
    * 403 Forbidden: If permission to access the document is denied.
    * 404 Not Found: If the document is not found.
    * 500 Internal Server Error: If there is an error retrieving the document.

### Module Management

* **`GET /list-modules`**

  * Description: Retrieves a paginated list of modules.
  * Query Parameters:
    * `limit` (integer, optional, default: 10): The maximum number of modules to return per page.
    * `lastId` (string, optional): The ID of the last module from the previous page, used for pagination.
  * Response:
    * 200 OK:
      * `modules` (array): An array of module objects. Each module object contains:
        * `id` (string): The ID of the module.
        * `title` (string): The title of the module.
        * `description` (string): The description of the module.
        * `content` (string): The Google Doc URL associated with the module.
        * `duration` (string, optional): The duration of the module.
        * `quizzes` (array, optional): An array of quiz IDs associated with the module.
        * `prerequisites` (array, optional): An array of prerequisite module IDs.
        * `createdAt` (string, optional): The creation timestamp of the module.
        * `updatedAt` (string, optional): The last updated timestamp of the module.
      * `hasMore` (boolean): Indicates if there are more modules to retrieve.
      * `lastId` (string, optional): The ID of the last module in the current page, for pagination.
    * 500 Internal Server Error: If there is an error retrieving the modules.
* **`GET /module/:id`**

  * Description: Retrieves a single module by its ID.
  * Parameters:
    * `id` (string, required): The ID of the module to retrieve.
  * Response:
    * 200 OK:
      * Returns a single module object (see structure in `/list-modules` response).
    * 404 Not Found: If the module is not found.
    * 500 Internal Server Error: If there is an error retrieving the module.
* **`GET /module/:id/sections`**

  * Description: Retrieves all sections for a given module.
  * Parameters:
    * `id` (string, required): The ID of the module.
  * Response:
    * 200 OK:
      * `sections` (array): An array of section objects. Each section object contains:
        * `id` (string): The ID of the section.
        * `title` (string): The title of the section.
        * `content` (string): The content of the section.
        * `order` (number): The order of the section within the module.
    * 500 Internal Server Error: If there is an error retrieving the sections.

### Quiz Generation and Results

* **`POST /generate-quiz`**

  * Description: Generates a quiz for a given module using AI.
  * Request Body:
    * `moduleId` (string, required): The ID of the module to generate a quiz for.
    * `numberOfQuestions` (integer, optional, default: 5): The number of questions to generate.
    * `questionTypes` (array of strings, optional, default: `['multiple choice', 'true or false']`):  An array of question types to include in the quiz.  Valid types are "multiple choice" and "true or false".
  * Response:
    * 200 OK:
      * `quiz` (array): An array of quiz questions. Each question object contains:
        * `id` (number): The ID of the question.
        * `question` (string): The text of the question.
        * `answers` (array): An array of possible answers. Each answer object contains:
          * `letter` (string):  A letter (a, b, c, d) for multiple choice or "true" or "false" for true/false questions.
          * `answer` (string): The text of the answer.
          * `uniqueKey` (string): Unique identifier for the answer.
        * `correctAnswer` (string): The correct answer (e.g., "a", "b", "true", "false").
        * `explanation` (string): An explanation of why the answer is correct.
    * 400 Bad Request: If `moduleId` is not provided or if the request is invalid.
    * 403 Forbidden: If the Hugging Face API key is invalid.
    * 404 Not Found: If the module is not found.
    * 429 Too Many Requests: If the Hugging Face API rate limit is exceeded.
    * 500 Internal Server Error: If there is an error generating the quiz.
    * 504 Gateway Timeout: If the request to the Hugging Face API times out.
* **`POST /save-quiz-result`**

  * Description: Saves the results of a quiz taken by a user.  Also updates user progress.
  * Request Body:
    * `userId` (string, required): The ID of the user who took the quiz.
    * `moduleId` (string, required): The ID of the module the quiz belongs to.
    * `quizId` (string, optional): The ID of the quiz. If not provided, an ID will be generated.
    * `score` (integer, required): The user's score on the quiz.
    * `totalQuestions` (integer, required): The total number of questions in the quiz.
    * `answers` (object, optional): An object containing the user's answers to the quiz questions.
    * `timestamp` (string or Date, optional, default: current time): The timestamp when the quiz was completed.
  * Response:
    * 201 Created:
      * `success` (boolean): `true` if the result was saved successfully.
      * `message` (string): "Quiz result saved successfully".
      * `resultId` (string): The ID of the saved quiz result.
    * 400 Bad Request: If any required fields are missing.
    * 500 Internal Server Error: If there is an error saving the quiz result or updating user progress.
* **`GET /user/:userId/quiz-history`**

  * Description: Retrieves the quiz history for a given user.
  * Parameters:
    * `userId` (string, required): The ID of the user.
  * Response:
    * 200 OK:
      * `quizHistory` (array): An array of quiz history objects. Each object contains:
        * `id` (string): The ID of the quiz result.
        * `moduleId` (string, optional): The ID of the module the quiz belongs to.
        * `score` (number, optional): The user's score on the quiz.
        * `totalQuestions` (number, optional): The total number of questions in the quiz.
        * `timestamp` (string): The timestamp when the quiz was completed (ISO string).
    * 400 Bad Request: If the `userId` is not provided.
    * 500 Internal Server Error: If there is an error fetching the quiz history.

### User Progress

* **`GET /user/:userId/progress`**

  * Description: Retrieves the learning progress for a given user.
  * Parameters:
    * `userId` (string, required): The ID of the user.
  * Response:
    * 200 OK:
      * `learningProgress` (object): An object containing the user's learning progress:
        * `completedModules` (array): An array of module IDs completed by the user.
        * `completedQuizzes` (array): An array of quiz objects completed by the user.
        * `completedExams` (array): An array of exam objects completed by the user.
        * `score` (number): The user's overall score.
      * `progress` (array, optional): An array of progress data from a subcollection (if used).  Each object contains:
        * `quizId` (string): The ID of the quiz.
        * `moduleId` (string): The ID of the module.
        * `score` (number): The user's score.
        * `totalQuestions` (number): The total number of questions.
        * `completedAt` (string): Completion timestamp (ISO string).
      * `modules` (array): An array of all modules with their IDs and titles.
    * 400 Bad Request: If the `userId` is not provided.
    * 404 Not Found: If the user is not found.
    * 500 Internal Server Error: If there is an error fetching the user progress.

### Health Check

* **`GET /health`**

  * Description:  Performs a health check on the API.
  * Response:
    * 200 OK:
      * `status` (string): "ok".
      * `timestamp` (string): The current timestamp (ISO string).

## Error Handling

The API uses standard HTTP status codes to indicate the success or failure of a request.  Error responses typically include a JSON object with an `error` message and, in development environments, a `stack` trace.

## Data Formats

Requests and responses use JSON format.  Timestamps are generally represented as ISO 8601 strings.

# Cloud Explorer App - API Documentation

This document provides technical details about the Cloud Explorer app's backend API. This information is intended for developers who want to understand how the app communicates with the server. You can use tools like Postman to interact with these endpoints.

**Base URL:** `http://10.0.2.2:5000`

**Authentication:** Many endpoints require a `userId` to be passed as a path parameter to identify the user.

## 1. User Progress

These endpoints manage the user's learning progress within the app.

### 1.1. Start a Module

* **Endpoint:** `/user/{userId}/module/start`
* **Method:** `POST`
* **Description:** Initiates a learning module for a specific user.
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Request Body (application/json):**

    ```json
    {
      "moduleId": "string" // The unique identifier of the module to start.
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "message": "Module started"
    }
    ```

* **Status Codes:**
  * `200 OK`: Module started successfully.
  * `400 Bad Request`: Invalid `userId` or `moduleId`.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

### 1.2. Track Module Reading Progress

* **Endpoint:** `/user/{userId}/progress`
* **Method:** `POST`
* **Description:** Records the user's progress within a module (e.g., starting or completing content).
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Request Body (application/json):**

    ```json
    {
      "moduleId": "string", // The unique identifier of the module.
      "action": "start" | "complete", // Indicates whether the user started or completed the content.
      "timestamp": "optional string (ISO 8601)" // Optional timestamp for the action. If not provided, the server will use the current time.
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "success": true
    }
    ```

* **Status Codes:**
  * `200 OK`: Progress tracked successfully.
  * `400 Bad Request`: Missing or invalid parameters.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

### 1.3. Get User Progress

* **Endpoint:** `/user/{userId}/progress`
* **Method:** `GET`
* **Description:** Retrieves the learning progress for a specific user.
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Response Body (application/json):**

    ```json
    {
      "learningProgress": {
        "completedModules": ["moduleId1", "moduleId2"],
        "completedQuizzes": [
          {
            "moduleId": "moduleId1",
            "quizId": "quizId1",
            "score": 80,
            "completedAt": "string (ISO 8601)"
          }
        ],
        "completedExams": ["examId1"],
        "modulesInProgress": ["moduleId3"],
        "score": 160 // Example total score
      },
      "progress": [ // Detailed progress for each module/quiz/exam
        {
          "moduleId": "moduleId1",
          "startedAt": "string (ISO 8601)",
          "status": "completed"
        },
        {
          "moduleId": "moduleId1",
          "quizId": "quizId1",
          "score": 80,
          "totalQuestions": 10,
          "completedAt": "string (ISO 8601)"
        }
        // ... more progress entries
      ],
      "modules": [ // List of all modules with basic info
        {
          "id": "moduleId1",
          "title": "Module Title 1",
          "description": "Module Description 1"
        },
        // ... more modules
      ],
      "exams": [ // List of all exams with basic info
        {
          "id": "examId1",
          "title": "Exam Title 1"
        },
        // ... more exams
      ],
      "examResults": [ // History of exam results
        {
          "id": "examResultId1",
          "examId": "examId1",
          "score": 90,
          "totalQuestions": 100,
          "percentage": "90.0",
          "timestamp": "string (ISO 8601)"
        }
        // ... more exam results
      ],
      "quizResults": [ // History of quiz results
        {
          "id": "quizResultId1",
          "moduleId": "moduleId1",
          "score": 8,
          "totalQuestions": 10,
          "percentage": 80,
          "timestamp": "string (ISO 8601)"
        }
        // ... more quiz results
      ]
    }
    ```

* **Status Codes:**
  * `200 OK`: User progress retrieved successfully.
  * `400 Bad Request`: Invalid `userId`.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

### 1.4. Complete an Exam

* **Endpoint:** `/user/{userId}/exam`
* **Method:** `POST`
* **Description:** Marks an exam as completed for a user and updates their progress.
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Request Body (application/json):**

    ```json
    {
      "moduleId": "string", // The unique identifier of the module the exam belongs to.
      "examId": "string", // The unique identifier of the exam.
      "quizId": "string", // The unique identifier of the associated quiz (if any).
      "score": 90 // The user's score on the exam.
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "message": "Exam completed"
    }
    ```

* **Status Codes:**
  * `200 OK`: Exam completion recorded successfully.
  * `400 Bad Request`: Missing or invalid parameters.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

### 1.5. Get Exam Progress for a User

* **Endpoint:** `/user/{userId}/exam-progress`
* **Method:** `GET`
* **Description:** Retrieves the progress for all exams taken by a specific user.
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Response Body (application/json):**

    ```json
    {
      "examProgress": [
        {
          "examId": "examId1",
          "score": 90,
          "timestamp": "string (ISO 8601)"
        },
        // ... more exam progress entries
      ]
    }
    ```

* **Status Codes:**
  * `200 OK`: Exam progress retrieved successfully.
  * `400 Bad Request`: Invalid `userId`.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

## 2. Modules

These endpoints manage the learning modules (lessons) in the app.

### 2.1. Create a Google Doc (for Modules or Exams)

* **Endpoint:** `/create-doc`
* **Method:** `POST`
* **Description:** Creates a new Google Document and optionally associates it with a module or exam.
* **Request Body (application/json):**

    ```json
    {
      "moduleId": "optional string", // The unique identifier of the module to associate with.
      "examId": "optional string", // The unique identifier of the exam to associate with.
      "title": "string", // The title of the new Google Document.
      "content": "optional string" // The initial content of the document.
    }
    ```

    **Note:** You must provide either `moduleId` or `examId` to associate the document.
* **Response Body (application/json):**

    ```json
    {
      "documentId": "string", // The ID of the newly created Google Document.
      "docUrl": "string" // The URL to edit the Google Document.
    }
    ```

* **Status Codes:**
  * `200 OK`: Document created successfully.
  * `400 Bad Request`: Missing `moduleId` or `examId`, or invalid input.
  * `500 Internal Server Error`: An error occurred while creating the document.

### 2.2. List All Modules

* **Endpoint:** `/list-modules`
* **Method:** `GET`
* **Description:** Retrieves a paginated list of all learning modules.
* **Query Parameters:**
  * `limit` (integer, optional, default: `10`): The maximum number of modules to return per page.
  * `lastId` (string, optional): The ID of the last module from the previous page. Used for pagination.
* **Response Body (application/json):**

    ```json
    {
      "modules": [
        {
          "id": "moduleId1",
          "title": "Module Title 1",
          "description": "Module Description 1",
          "content": "google_doc_url_1",
          "duration": "1 hour",
          "quizzes": ["quizId1"],
          "prerequisites": ["moduleId0"],
          "createdAt": "string (ISO 8601)",
          "updatedAt": "string (ISO 8601)"
        },
        // ... more modules
      ],
      "hasMore": true, // Indicates if there are more modules to fetch.
      "lastId": "moduleIdLast" // The ID of the last module in the current page, used for fetching the next page.
    }
    ```

* **Status Codes:**
  * `200 OK`: Modules retrieved successfully.
  * `400 Bad Request`: Invalid `limit` value.
  * `500 Internal Server Error`: An unexpected error occurred.

### 2.3. Get a Single Module by ID

* **Endpoint:** `/module/{id}`
* **Method:** `GET`
* **Description:** Retrieves detailed information about a specific learning module.
* **Path Parameters:**
  * `id` (string, required): The unique identifier of the module.
* **Response Body (application/json):**

    ```json
    {
      "id": "moduleId1",
      "title": "Module Title 1",
      "description": "Module Description 1",
      "content": "google_doc_url_1",
      "duration": "1 hour",
      "quizzes": ["quizId1"],
      "prerequisites": ["moduleId0"],
      "createdAt": "string (ISO 8601)",
      "updatedAt": "string (ISO 8601)"
    }
    ```

* **Status Codes:**
  * `200 OK`: Module retrieved successfully.
  * `400 Bad Request`: Invalid module ID.
  * `404 Not Found`: Module not found.
  * `500 Internal Server Error`: An unexpected error occurred.

### 2.4. Get Sections for a Module

* **Endpoint:** `/module/{id}/sections`
* **Method:** `GET`
* **Description:** Retrieves the sections that belong to a specific learning module.
* **Path Parameters:**
  * `id` (string, required): The unique identifier of the module.
* **Response Body (application/json):**

    ```json
    [
      {
        "id": "sectionId1",
        "title": "Section Title 1",
        "content": "Section Content 1",
        "order": 1
      },
      {
        "id": "sectionId2",
        "title": "Section Title 2",
        "content": "Section Content 2",
        "order": 2
      }
      // ... more sections
    ]
    ```

* **Status Codes:**
  * `200 OK`: Sections retrieved successfully (can be an empty array if no sections).
  * `400 Bad Request`: Invalid module ID.
  * `404 Not Found`: Module not found.
  * `500 Internal Server Error`: An unexpected error occurred.

## 3. Exams

These endpoints manage the exams in the app.

### 3.1. Create Exam

* **Endpoint:** `/create-exam`
* **Method:** `POST`
* **Description:** Creates a new exam (represented by a Google Document).
* **Request Body (application/json):**

    ```json
    {
      "examId": "string", // The unique identifier for the exam.
      "title": "string", // The title of the exam.
      "content": "optional string" // The initial content of the exam.
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "examId": "string", // The unique identifier of the created exam.
      "docUrl": "string" // The URL to edit the Google Document for the exam.
    }
    ```

* **Status Codes:**
  * `200 OK`: Exam created successfully.
  * `400 Bad Request`: Missing or invalid parameters.
  * `500 Internal Server Error`: An error occurred while creating the exam.

### 3.2. Save Exam Result

* **Endpoint:** `/save-exam-result`
* **Method:** `POST`
* **Description:** Saves the result of an exam taken by a user.
* **Request Body (application/json):**

    ```json
    {
      "userId": "string", // The unique identifier of the user who took the exam.
      "examId": "string", // The unique identifier of the exam.
      "result": {
        "totalQuestions": 100, // The total number of questions in the exam.
        "correctAnswers": 90, // The number of questions answered correctly.
        "score": 90, // The user's score (can be same as correctAnswers or a calculated value).
        "isPassed": true, // Boolean indicating if the user passed the exam.
        "answeredQuestions": { // An object containing details of answered questions (optional).
          "questionId1": "selectedAnswer",
          "questionId2": "selectedAnswer"
          // ...
        }
      }
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "success": true,
      "message": "Exam result saved successfully",
      "resultId": "string" // The unique identifier of the saved exam result.
    }
    ```

* **Status Codes:**
  * `201 Created`: Exam result saved successfully.
  * `400 Bad Request`: Missing or invalid parameters.
  * `500 Internal Server Error`: An error occurred while saving the result.

### 3.3. Generate Exam Questions

* **Endpoint:** `/generate-exam`
* **Method:** `POST`
* **Description:** Generates exam questions based on the content associated with a specific exam ID. This uses the Hugging Face API.
* **Request Body (application/json):**

    ```json
    {
      "examId": "string", // The unique identifier of the exam to generate questions for.
      "numberOfQuestions": "optional number", // The desired number of questions (default: 25).
      "questionTypes": ["multiple choice", "true or false"] // The types of questions to generate (optional).
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "questions": [
        {
          "id": 0,
          "question": "Question text 1?",
          "answers": [
            {"letter": "a", "answer": "Answer A", "uniqueKey": "q0-a"},
            {"letter": "b", "answer": "Answer B", "uniqueKey": "q0-b"},
            {"letter": "c", "answer": "Answer C", "uniqueKey": "q0-c"},
            {"letter": "d", "answer": "Answer D", "uniqueKey": "q0-d"}
          ],
          "correctAnswer": "a",
          "explanation": "Explanation for the correct answer."
        },
        // ... more questions
      ]
    }
    ```

* **Status Codes:**
  * `200 OK`: Questions generated successfully.
  * `400 Bad Request`: Missing `examId`.
  * `404 Not Found`: Exam not found.
  * `429 Too Many Requests`: Rate limit exceeded for the Hugging Face API.
  * `500 Internal Server Error`: An error occurred while generating questions.

## 4. Quizzes

These endpoints manage the quizzes within the app.

### 4.1. Generate Quiz Questions

* **Endpoint:** `/generate-quiz`
* **Method:** `POST`
* **Description:** Generates quiz questions based on the content of a specific module. This uses the Hugging Face API.
* **Request Body (application/json):**

    ```json
    {
      "moduleId": "string", // The unique identifier of the module to generate questions for.
      "numberOfQuestions": "optional number", // The desired number of questions (default: 5).
      "questionTypes": ["multiple choice", "true or false"] // The types of questions to generate (optional).
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "quiz": [
        {
          "id": 0,
          "question": "Question text 1?",
          "answers": [
            {"letter": "a", "answer": "Answer A", "uniqueKey": "q0-a"},
            {"letter": "b", "answer": "Answer B", "uniqueKey": "q0-b"},
            {"letter": "c", "answer": "Answer C", "uniqueKey": "q0-c"},
            {"letter": "d", "answer": "Answer D", "uniqueKey": "q0-d"}
          ],
          "correctAnswer": "a",
          "explanation": "Explanation for the correct answer."
        },
        // ... more questions
      ]
    }
    ```

* **Status Codes:**
  * `200 OK`: Questions generated successfully.
  * `400 Bad Request`: Missing `moduleId`.
  * `404 Not Found`: Module not found.
  * `429 Too Many Requests`: Rate limit exceeded for the Hugging Face API.
  * `500 Internal Server Error`: An error occurred while generating questions.

### 4.2. Save Quiz Result

* **Endpoint:** `/save-quiz-result`
* **Method:** `POST`
* **Description:** Saves the result of a quiz taken by a user.
* **Request Body (application/json):**

    ```json
    {
      "userId": "string", // The unique identifier of the user who took the quiz.
      "moduleId": "string", // The unique identifier of the module the quiz belongs to.
      "quizId": "optional string", // The unique identifier for this specific quiz attempt (can be auto-generated).
      "score": 8, // The number of questions answered correctly.
      "totalQuestions": 10, // The total number of questions in the quiz.
      "answers": { // An object containing the user's answers (optional).
        "questionId1": "selectedAnswer",
        "questionId2": "selectedAnswer"
        // ...
      },
      "timestamp": "optional string (ISO 8601)" // Optional timestamp for when the quiz was completed.
    }
    ```

* **Response Body (application/json):**

    ```json
    {
      "success": true,
      "message": "Quiz result saved successfully",
      "resultId": "string" // The unique identifier of the saved quiz result.
    }
    ```

* **Status Codes:**
  * `201 Created`: Quiz result saved successfully.
  * `400 Bad Request`: Missing required fields.
  * `500 Internal Server Error`: An error occurred while saving the result.

### 4.3. Get Quiz History for a User

* **Endpoint:** `/user/{userId}/quiz-history`
* **Method:** `GET`
* **Description:** Retrieves the history of quizzes taken by a specific user.
* **Path Parameters:**
  * `userId` (string, required): The unique identifier of the user.
* **Response Body (application/json):**

    ```json
    {
      "quizHistory": [
        {
          "id": "quizResultId1",
          "userId": "userId123",
          "moduleId": "moduleId1",
          "quizId": "quizId1",
          "score": 8,
          "totalQuestions": 10,
          "percentage": 80,
          "answers": { ... },
          "timestamp": "string (ISO 8601)"
        },
        // ... more quiz history entries
      ]
    }
    ```

* **Status Codes:**
  * `200 OK`: Quiz history retrieved successfully.
  * `400 Bad Request`: Missing `userId`.
  * `404 Not Found`: User not found.
  * `500 Internal Server Error`: An unexpected error occurred.

## 5. Documents

This endpoint allows retrieving the content of Google Documents.

### 5.1. Get Google Doc Content

* **Endpoint:** `/get-doc-content/{docId}`
* **Method:** `GET`
* **Description:** Retrieves the content of a specific Google Document.
* **Path Parameters:**
  * `docId` (string, required): The unique identifier of the Google Document.
* **Response Body (application/json):**

    ```json
    [
      {
        "paragraph": {
          "elements": [
            {
              "textRun": {
                "content": "This is the first paragraph.\n"
              }
            }
          ]
        }
      },
      {
        "paragraph": {
          "elements": [
            {
              "textRun": {
                "content": "And this is the second paragraph.\n"
              }
            }
          ]
        }
      }
      // ... more content elements
    ]
    ```

* **Status Codes:**
  * `200 OK`: Document content retrieved successfully.
  * `400 Bad Request`: Invalid `docId`.
  * `404 Not Found`: Google Document not found.
  * `500 Internal Server Error`: An error occurred while retrieving the content.

## 6. Other

### 6.1. Health Check

* **Endpoint:** `/health`
* **Method:** `GET`
* **Description:** Checks the health and status of the API server.
* **Response Body (application/json):**

    ```json
    {
      "status": "ok",
      "timestamp": "string (ISO 8601)"
    }
    ```

* **Status Codes:**
  * `200 OK`: API is healthy.

## Rate Limiting (Hugging Face API)

The `/generate-quiz` and `/generate-exam` endpoints utilize the Hugging Face Inference API, which has rate limits in place. You are limited to **5 requests per minute** from a single IP address. If you exceed this limit, you will receive a `429 Too Many Requests` error.

## Error Handling

The API uses a standardized error response format for most errors:

```json
{
  "error": "Error message describing the issue",
  "details": { // Optional: Additional details about the error
    "stack": "Stack trace (in development mode)",
    "apiResponse": { ... }, // Details from external API responses
    "errors": { ... } // Validation errors
  }
}
