
# Data Modeling

* @author Thabiso Matsaba
* @email <thabisomatsaba96@gmail.com>
* @create date 10-01-2025 03:03:52
* @modify date 10-01-2025 03:03:52
* @desc Data Modeling

## Step 1: Set Up Firebase in Your Project

First, make sure you have Firebase set up in your React Native project. If you haven't done this yet, follow these steps:

1. **Install Firebase and Firestore dependencies**:

   ```bash
   npm install @react-native-firebase/app @react-native-firebase/auth @react-native-firebase/firestore
   ```

2. **Configure Firebase**:
   * Follow the React Native Firebase setup guide to configure Firebase in your project.
   * Add the `google-services.json` file to your `android/app` directory.
   * Add the `GoogleService-Info.plist` file to your `ios` directory.

### Step 2: Create Data Models

We'll create separate folders and files for the data models. Here's the structure we'll follow:

```bash
src/
  models/
    User.ts
    Module.ts
    Quiz.ts
    Progress.ts
  services/
    firebase.ts
```

### Step 3: Define Data Models

To design the data modeling for your **Cloud Explorer** app using Firestore, we need to structure the data in a way that aligns with your app's functional requirements and ensures efficient querying, scalability, and real-time synchronization. Below is a proposed data model for your app:

---

## **Data Model for Cloud Explorer**

### **1. Users Collection**

Stores user-specific data, including authentication details, progress, and preferences.

```json
users: {
  userId: string, // Unique ID generated by Firebase Authentication
  email: string,
  displayName: string,
  photoURL: string, // URL to the user's profile picture
  createdAt: timestamp, // When the user registered
  lastLogin: timestamp, // Last login time
  learningProgress: {
    completedModules: array, // Array of module IDs the user has completed
    completedQuizzes: array, // Array of quiz IDs the user has completed
    completedExams: array, // Array of exam IDs the user has completed
    score: number, // Overall score across quizzes and exams
  },
  settings: {
    notificationsEnabled: boolean,
    darkMode: boolean,
  }
}
```

---

### **2. Learning Modules Collection**

Stores information about the learning modules, including content and metadata.

```json
learningModules: {
  moduleId: string, // Unique ID for the module
  title: string,
  description: string,
  content: string, // HTML or Markdown content for the module
  duration: number, // Estimated time to complete the module (in minutes)
  prerequisites: array, // Array of module IDs required to unlock this module
  quizzes: array, // Array of quiz IDs associated with this module
  createdAt: timestamp,
  updatedAt: timestamp,
}
```

---

### **3. Quizzes Collection**

Stores quiz questions, answers, and metadata.

```json
quizzes: {
  quizId: string, // Unique ID for the quiz
  moduleId: string, // ID of the associated learning module
  title: string,
  questions: array, // Array of question objects
  passingScore: number, // Minimum score required to pass the quiz
  createdAt: timestamp,
  updatedAt: timestamp,
}
```

Each question in the `questions` array is structured as:

```json
{
  questionId: string, // Unique ID for the question
  questionText: string,
  options: array, // Array of answer options
  correctAnswer: string, // Correct answer
  explanation: string, // Explanation for the correct answer
}
```

---

### **4. Exams Collection**

Stores exam details, including questions and results.

```json
exams: {
  examId: string, // Unique ID for the exam
  title: string,
  description: string,
  questions: array, // Array of question objects (similar to quizzes)
  passingScore: number, // Minimum score required to pass the exam
  createdAt: timestamp,
  updatedAt: timestamp,
}
```

---

### **5. User Progress Collection**

Tracks user progress for quizzes and exams.

```json
userProgress: {
  userId: string, // ID of the user
  quizId: string, // ID of the quiz (if applicable)
  examId: string, // ID of the exam (if applicable)
  score: number, // User's score
  totalQuestions: number, // Total number of questions
  correctAnswers: number, // Number of correct answers
  completedAt: timestamp, // When the quiz/exam was completed
}
```

---

### **6. Notifications Collection**

Stores notifications sent to users.

```json
notifications: {
  notificationId: string, // Unique ID for the notification
  userId: string, // ID of the user receiving the notification
  title: string,
  message: string,
  type: string, // e.g., "quiz_result", "exam_result", "learning_milestone"
  read: boolean, // Whether the notification has been read
  createdAt: timestamp,
}
```

---

### **7. AI-Generated Content Collection**

Stores AI-generated questions, explanations, and content for quizzes and exams.

```json
aiContent: {
  contentId: string, // Unique ID for the content
  type: string, // e.g., "quiz_question", "explanation"
  source: string, // e.g., "GPT-3", "Hugging Face"
  content: string, // The actual content (question, explanation, etc.)
  metadata: {
    moduleId: string, // ID of the associated module (if applicable)
    quizId: string, // ID of the associated quiz (if applicable)
    examId: string, // ID of the associated exam (if applicable)
  },
  createdAt: timestamp,
}
```

---

## **Relationships Between Collections**

1. **Users ↔ Learning Modules**: A user can complete multiple learning modules, and each module can be completed by multiple users.
2. **Learning Modules ↔ Quizzes**: Each learning module can have multiple quizzes, and each quiz is associated with one module.
3. **Quizzes ↔ User Progress**: Each quiz can have multiple user progress entries, and each user progress entry is associated with one quiz.
4. **Exams ↔ User Progress**: Each exam can have multiple user progress entries, and each user progress entry is associated with one exam.
5. **Users ↔ Notifications**: Each user can have multiple notifications, and each notification is associated with one user.

---

## **Firestore Security Rules**

To ensure data security, you can define Firestore security rules. Below is an example:

```javascript
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    match /learningModules/{moduleId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && isAdmin(request.auth.uid);
    }
    match /quizzes/{quizId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && isAdmin(request.auth.uid);
    }
    match /exams/{examId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && isAdmin(request.auth.uid);
    }
    match /userProgress/{progressId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
    }
    match /notifications/{notificationId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
    }
  }
}
```

---

## **Next Steps**

1. **Implement Firestore Collections**: Create the collections and documents as per the data model.
2. **Integrate with Frontend**: Use Firebase SDKs to interact with Firestore from your React Native app.
3. **Test Security Rules**: Ensure that the Firestore security rules are working as expected.
4. **Optimize Queries**: Use Firestore indexing to optimize queries for better performance.

Let me know if you need further assistance or refinements to the data model!
